<div>
	<div class="view-mode" ng-hide="category.isineditmode">
	    <a href="#" ng-click="showSubCategories(category)" ng-show="newEditorVisible(category)"> <span class="glyphicon glyphicon-{{category.showsubcategories ? 'minus' : 'plus'}}"></span></a>
	    <span>{{category.label}}</span>
	    <a href="#" ng-click="edit(category)"><span class="glyphicon glyphicon-pencil" ></span></a>
	</div>
	<div class="edit-mode" ng-show="category.isineditmode">
	    <input type="text" ng-model="editedcategory.category.label">
	    <a href="#" ng-click="save()"><span class="glyphicon glyphicon-floppy-disk" ></span></a>
	    <a href="#" ng-click="cancel()"><span class="glyphicon glyphicon-remove text-danger" ></span></a>
	</div>

	<div class="subcategories" ng-show="category.showsubcategories && category.sub">
		<ul>
            <li ng-repeat="subcategory in category.sub">
            	<div class="category-item" category="subcategory" editedcategory="editedcategory"></div>
            </li>
        </ul>
	</div>

	<div class="new-editor" ng-show="category.showsubcategories && newEditorVisible(category)">
		<a href="#" class="btn btn-default" ng-click="createCategory(category)" ng-hide="editedcategory.category">new</a>

		<div ng-show="editedcategory.category && !editedcategory.category.id && newElementParentCategory==category">
			<input type="text" ng-model="editedcategory.category.label">

			<a href="#" ng-click="save()"><span class="glyphicon glyphicon-floppy-disk" ></span></a>
			<a href="#" ng-click="cancel()"><span class="glyphicon glyphicon-remove text-danger" ></span></a>
		</div>
	</div>

</div>